
<!--The common header and footer or layout part is copied to layout .ejs here only remained the variable part-->
<!-- <html>
    <head>
        <title>
            <%= title %>
        </title>
    </head>
    <body>

        <-- calling the header and footer from partials _header.ejs and _footer.ejs -->
        
        <!-- <%- include('_header'); %> --> 

        <!-- <h1> Codeial / <%=title %> </h1> -->

        <!-- <%- include('_footer'); %>
    </body>
</html> -->

<!-- variable part-->

<link rel="stylesheet" href='/css/home.css'>



<!-- <h1> 
    Conneqtion Codeial / <%=title %> 
</h1> -->

<div id="home-container">

    <section id="feed-posts">
        <h4>
            Posts
        </h4>
         <!-- locals is object -->
        <% if (locals.user) { %>
            <form action="/posts/create" id="new-post-form" method="POST">
                <textarea name="content"  cols="30" rows="5" placeholder="Type Here" required></textarea>
                <input type="submit" value="Post">
            </form>
        <% } %>
    
        <div id="posts-list-container">
            <ul>
                <% for (post of posts) { %>
                
                    <!-- including partials-->
    
                    <%- include('_post') -%>
                
                <% } %>
            </ul>
        </div>
    </section>
    
    <section id="user-friends">
        <h4>Friends</h4>
        <% for (u of all_users){ %>
            <p>
                <a href="/users/profile/<%= u.id %>">
                    <%= u.name %>
                </a>
            </p>
        <% } %>
    </section>

    <%- include('_chat_box') -%>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/home_post_comments.js" ></script>
<script type="text/javascript" src="/js/home_posts.js"></script>


<script src="js/toggle_likes.js"></script>
<script>
    $('.toggle-like-button').each(function(){
        let self = this;
        let toggleLike = new ToggleLike(self);
    });
</script>
